# ===================================
# Configuration Spring Boot pour Docker
# ===================================
# Ce fichier sera utilisé quand SPRING_PROFILES_ACTIVE=docker

# ===================================
# SERVER CONFIGURATION
# ===================================
server.port=8080
server.servlet.context-path=/

# ===================================
# DATABASE CONFIGURATION
# ===================================
# Les valeurs seront injectées via les variables d'environnement du docker-compose
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://mysql:3306/elegant_hive_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:elegant_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:elegant_password_123}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ===================================
# JPA / HIBERNATE CONFIGURATION
# ===================================
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.jdbc.time_zone=Africa/Tunis
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# ===================================
# REDIS CONFIGURATION
# ===================================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:redis_password_123}
spring.data.redis.timeout=60000

# ===================================
# JWT CONFIGURATION
# ===================================
jwt.secret=${JWT_SECRET:your_super_secret_key_change_this_in_production}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ===================================
# EMAIL CONFIGURATION
# ===================================
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${SPRING_MAIL_PASSWORD:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ===================================
# FILE UPLOAD CONFIGURATION
# ===================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=20MB
spring.servlet.multipart.max-request-size=25MB

# Chemin de stockage des uploads (dans le conteneur Docker)
app.upload.dir=/app/uploads

# ===================================
# LOGGING CONFIGURATION
# ===================================
logging.level.root=INFO
logging.level.tn.weeding.agenceevenementielle=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ===================================
# CORS CONFIGURATION
# ===================================
# Les URLs autorisées pour CORS (frontend)
app.cors.allowed-origins=${APP_BASE_URL:http://localhost:4200},http://frontend:4000,http://nginx:80

# ===================================
# GOOGLE OAUTH2 CONFIGURATION
# ===================================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:your-client-id}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:your-client-secret}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri=${APP_BASE_URL}/login/oauth2/code/google

# ===================================
# ACTUATOR (Monitoring / Health Check)
# ===================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.redis.enabled=true
management.health.db.enabled=true

# ===================================
# APPLICATION PROPERTIES
# ===================================
app.name=Elegant Hive
app.version=1.0.0
app.base-url=${APP_BASE_URL:http://localhost:4200}

# Timezone
spring.jpa.properties.hibernate.jdbc.time_zone=Africa/Tunis